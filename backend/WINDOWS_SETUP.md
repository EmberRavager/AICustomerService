# ğŸªŸ Windows ç¯å¢ƒå®‰è£…æŒ‡å—

## é—®é¢˜è¯´æ˜

åœ¨ Windows ä¸Šå®‰è£… ChromaDB æ—¶ï¼Œå¯èƒ½é‡åˆ° `chroma-hnswlib` éœ€è¦ Microsoft Visual C++ ç¼–è¯‘å™¨çš„é—®é¢˜ã€‚

```
Error: Microsoft Visual C++ 14.0 or greater is required.
```

---

## ğŸ¯ æ¨èè§£å†³æ–¹æ¡ˆï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

### æ–¹æ¡ˆ 1ï¸âƒ£ï¼šå®‰è£… Microsoft C++ Build Toolsï¼ˆä¸€åŠ³æ°¸é€¸ï¼‰

**é€‚åˆï¼šé•¿æœŸå¼€å‘ï¼Œæ¨èæ–¹æ¡ˆ**

#### æ­¥éª¤ï¼š

1. **ä¸‹è½½å®‰è£…ç¨‹åº**
   
   è®¿é—®ï¼šhttps://visualstudio.microsoft.com/visual-cpp-build-tools/
   
   æˆ–ç›´æ¥ä¸‹è½½ï¼šhttps://aka.ms/vs/17/release/vs_BuildTools.exe

2. **è¿è¡Œå®‰è£…ç¨‹åº**
   
   é€‰æ‹©å·¥ä½œè´Ÿè½½ï¼š**"ä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘"**
   
   æˆ–æ‰‹åŠ¨å‹¾é€‰ä»¥ä¸‹ç»„ä»¶ï¼š
   - âœ… MSVC v143 - VS 2022 C++ x64/x86 ç”Ÿæˆå·¥å…·
   - âœ… Windows SDKï¼ˆä»»æ„ç‰ˆæœ¬ï¼‰
   - âœ… C++ CMake å·¥å…·ï¼ˆå¯é€‰ï¼‰

3. **å®‰è£…å¤§å°**ï¼šçº¦ 6-8 GB
   
   **æ—¶é—´**ï¼š10-20 åˆ†é’Ÿ

4. **å®‰è£…å®Œæˆå**
   
   ```bash
   # é‡å¯ç»ˆç«¯
   cd backend
   uv sync
   ```

---

### æ–¹æ¡ˆ 2ï¸âƒ£ï¼šä½¿ç”¨ä¿®å¤è„šæœ¬ï¼ˆå¿«é€Ÿå°è¯•ï¼‰

**é€‚åˆï¼šå¿«é€Ÿè§£å†³ï¼Œä¼˜å…ˆå°è¯•é¢„ç¼–è¯‘åŒ…**

```bash
cd backend
fix-chromadb.bat
```

è„šæœ¬ä¼šè‡ªåŠ¨å°è¯•å®‰è£…é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶åŒ…ã€‚

---

### æ–¹æ¡ˆ 3ï¸âƒ£ï¼šä½¿ç”¨ Condaï¼ˆåŒ…å«é¢„ç¼–è¯‘åŒ…ï¼‰

**é€‚åˆï¼šæœ‰ Conda ç¯å¢ƒçš„ç”¨æˆ·**

```bash
# å®‰è£… Miniconda
# https://docs.conda.io/en/latest/miniconda.html

# åˆ›å»ºç¯å¢ƒ
conda create -n chatbot python=3.11
conda activate chatbot

# å®‰è£… chromadbï¼ˆconda-forge æä¾›é¢„ç¼–è¯‘åŒ…ï¼‰
conda install -c conda-forge chromadb

# å®‰è£…å…¶ä»–ä¾èµ–
cd backend
uv sync --no-install-package chromadb
```

---

### æ–¹æ¡ˆ 4ï¸âƒ£ï¼šä½¿ç”¨ Dockerï¼ˆæœ€ç®€å•ï¼Œæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

**é€‚åˆï¼šä¸æƒ³é…ç½®æœ¬åœ°ç¯å¢ƒ**

```bash
# ç¡®ä¿å·²å®‰è£… Docker
docker --version

# ä½¿ç”¨ Docker è¿è¡Œï¼ˆæ‰€æœ‰ä¾èµ–å·²é¢„è£…ï¼‰
docker-compose up -d

# è®¿é—®
# å‰ç«¯: http://localhost
# åç«¯: http://localhost:8000/docs
```

---

## ğŸ” éªŒè¯å®‰è£…

### æ£€æŸ¥ C++ ç¼–è¯‘å™¨æ˜¯å¦å¯ç”¨

```powershell
# PowerShell
Get-Command cl.exe

# å¦‚æœæ‰¾åˆ°ï¼Œè¯´æ˜ç¼–è¯‘å™¨å·²å®‰è£…
```

### æµ‹è¯• ChromaDB

```bash
cd backend

# åˆ›å»ºæµ‹è¯•æ–‡ä»¶
echo "import chromadb; print('âœ… ChromaDB å·¥ä½œæ­£å¸¸!')" > test_chroma.py

# è¿è¡Œæµ‹è¯•
uv run python test_chroma.py

# æ¸…ç†
del test_chroma.py
```

---

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q1: æˆ‘å·²ç»å®‰è£…äº† Visual Studioï¼Œä¸ºä»€ä¹ˆè¿˜æŠ¥é”™ï¼Ÿ

**A:** éœ€è¦ç¡®ä¿å®‰è£…äº† C++ å·¥å…·ã€‚æ‰“å¼€ Visual Studio Installerï¼Œä¿®æ”¹å®‰è£…ï¼Œå‹¾é€‰ "ä½¿ç”¨ C++ çš„æ¡Œé¢å¼€å‘"ã€‚

### Q2: å®‰è£…å¤ªå¤§äº†ï¼Œæœ‰æ²¡æœ‰æ›´å°çš„æ–¹æ¡ˆï¼Ÿ

**A:** å¯ä»¥å°è¯•ï¼š
1. ä½¿ç”¨ Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰
2. ä½¿ç”¨ Condaï¼ˆçº¦ 500MBï¼‰
3. ç­‰å¾…ä¸Šæ¸¸æä¾›æ›´å¤šé¢„ç¼–è¯‘åŒ…

### Q3: èƒ½ä¸èƒ½ä¸ç”¨ ChromaDBï¼Ÿ

**A:** å¯ä»¥ï¼Œä½†éœ€è¦ä¿®æ”¹ä»£ç ã€‚æ›¿ä»£æ–¹æ¡ˆï¼š
- **FAISS**ï¼ˆFacebook AIï¼‰ï¼šæ›´å¿«ï¼Œä½†åŠŸèƒ½è¾ƒå°‘
- **Qdrant**ï¼šåŠŸèƒ½å¼ºå¤§ï¼Œéœ€è¦é¢å¤–æœåŠ¡
- **Weaviate**ï¼šä¼ä¸šçº§ï¼Œé…ç½®å¤æ‚

å¦‚æœé€‰æ‹©æ›¿æ¢ï¼Œéœ€è¦ä¿®æ”¹ `backend/services/knowledge_service.py`ã€‚

### Q4: UV å’Œ PIP éƒ½å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ

**A:** ä½¿ç”¨ Docker æ˜¯æœ€ç¨³å®šçš„æ–¹æ¡ˆï¼š

```bash
# ä¸€é”®éƒ¨ç½²
deploy.bat

# æˆ–æ‰‹åŠ¨
docker-compose up -d
```

---

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | å®‰è£…æ—¶é—´ | ç£ç›˜å ç”¨ | éš¾åº¦ | æ¨èåº¦ |
|------|---------|---------|------|--------|
| **C++ Build Tools** | 15åˆ†é’Ÿ | 6-8 GB | â­â­ | â­â­â­â­â­ |
| **ä¿®å¤è„šæœ¬** | 2åˆ†é’Ÿ | 0 | â­ | â­â­â­â­ |
| **Conda** | 10åˆ†é’Ÿ | 2-3 GB | â­â­ | â­â­â­ |
| **Docker** | 5åˆ†é’Ÿ | 1-2 GB | â­ | â­â­â­â­â­ |

---

## ğŸ¯ æ¨èè·¯å¾„

### å¯¹äºå¼€å‘è€…ï¼š
```
1. å…ˆå°è¯• fix-chromadb.batï¼ˆ2åˆ†é’Ÿï¼‰
2. å¦‚æœå¤±è´¥ â†’ å®‰è£… C++ Build Toolsï¼ˆ15åˆ†é’Ÿï¼‰
3. å¦‚æœä¸æƒ³å®‰è£… â†’ ä½¿ç”¨ Docker
```

### å¯¹äºå¿«é€Ÿæµ‹è¯•ï¼š
```
ç›´æ¥ä½¿ç”¨ Docker Composeï¼ˆ5åˆ†é’Ÿæå®šï¼‰
```

### å¯¹äºç”Ÿäº§éƒ¨ç½²ï¼š
```
ä½¿ç”¨ Docker Composeï¼ˆç¨³å®šå¯é ï¼‰
```

---

## ğŸš€ å®‰è£…å®Œæˆå

```bash
# å¯åŠ¨é¡¹ç›®
start.bat

# æˆ–åˆ†ç¦»å¯åŠ¨
cd backend
dev.bat

# è®¿é—®
http://localhost:1111  # å‰ç«¯
http://localhost:8000/docs  # API æ–‡æ¡£
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœä»¥ä¸Šæ–¹æ¡ˆéƒ½æ— æ³•è§£å†³ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

```bash
# 1. Python ç‰ˆæœ¬
python --version

# 2. UV ç‰ˆæœ¬
uv --version

# 3. Windows ç‰ˆæœ¬
winver

# 4. å®Œæ•´é”™è¯¯ä¿¡æ¯
uv sync 2>&1 | Out-File error.txt
```

---

**ç¥å¼€å‘é¡ºåˆ©ï¼** ğŸ‰

